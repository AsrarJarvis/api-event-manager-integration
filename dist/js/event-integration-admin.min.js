(EventManagerIntegration=EventManagerIntegration||{}).Admin=EventManagerIntegration.Admin||{},EventManagerIntegration.Admin.AcceptDeny=function(o){function e(){o(function(){this.handleEvents()}.bind(this))}return e.prototype.changeAccepted=function(e,a){o.ajax({url:eventintegration.ajaxurl,type:"post",data:{action:"accept_or_deny",value:e,postId:a},beforeSend:function(t){var n=o("#post-"+a);1==e?(n.find(".deny").removeClass("hidden"),n.find(".accept").addClass("hidden")):0==e&&(n.find(".deny").addClass("hidden"),n.find(".accept").removeClass("hidden"))}})},e.prototype.handleEvents=function(){o(document).on("click",".accept",function(t){t.preventDefault();var n=o(t.target).attr("postid");e.prototype.changeAccepted(1,n)}.bind(this)),o(document).on("click",".deny",function(t){t.preventDefault();var n=o(t.target).attr("postid");e.prototype.changeAccepted(0,n)}.bind(this))},new e}(jQuery),(EventManagerIntegration=EventManagerIntegration||{}).Admin=EventManagerIntegration.Admin||{},EventManagerIntegration.Admin.DrawMap=function(t){function n(){t(function(){"object"==typeof google&&"object"==typeof google.maps&&"event_page_acf-options-options"===pagenow&&this.init()}.bind(this))}return n.prototype.init=function(){var t=document.getElementById("draw-map-container");if(t){var n=document.createElement("div");n.id="draw-map-area",t.appendChild(n);var e=new google.maps.Map(n,{zoom:11,center:{lat:56.04673,lng:12.69437}});new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.POLYGON,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:["polygon"]}}).setMap(e)}},new n}(jQuery);var EventManagerIntegration=EventManagerIntegration||{};function collectCssFromButton(t){return{bgColor:t.css("background-color"),textColor:t.css("color"),borderColor:t.css("border-color"),textShadow:t.css("text-shadow"),boxShadow:t.css("box-shadow"),width:t.css("width"),text:t.text()}}function redLoadingButton(e,a){e.fadeOut(500,function(){var t=[eventIntegrationAdmin.loading+"&nbsp;&nbsp;&nbsp;",eventIntegrationAdmin.loading+".&nbsp;&nbsp;",eventIntegrationAdmin.loading+"..&nbsp;",eventIntegrationAdmin.loading+"..."];e.css("background-color","rgb(51, 197, 255)"),e.css("border-color","rgb(0, 164, 230)"),e.css("color","white"),e.css("text-shadow","0 -1px 1px rgb(0, 164, 230),1px 0 1px rgb(0, 164, 230),0 1px 1px rgb(0, 164, 230),-1px 0 1px rgb(0, 164, 230)"),e.css("box-shadow","none"),e.css("width","85px"),e.html(t[0]),e.fadeIn(500);var n=1;EventManagerIntegration.timerId=setInterval(function(){3<n&&(n=0),e.html(t[n]),++n},500),null!=a&&a()})}function restoreButton(t,n){t.fadeOut(500,function(){t.css("background-color",n.bgColor),t.css("color",n.textColor),t.css("border-color",n.borderColor),t.css("text-shadow",n.textShadow),t.css("box-shadow",n.boxShadow),t.css("width",n.width),t.text(n.text),t.fadeIn(500),clearTimeout(EventManagerIntegration.timerId)})}EventManagerIntegration.loading=!1,EventManagerIntegration.data={action:"import_events",value:""},EventManagerIntegration.timerId=null,jQuery(document).ready(function(t){t("#importevents").click(function(){if(!EventManagerIntegration.loadingOccasions){EventManagerIntegration.loadingOccasions=!0;var n=t(this),e=collectCssFromButton(n);redLoadingButton(n,function(){EventManagerIntegration.data.value=n.attr("id"),jQuery.post(ajaxurl,EventManagerIntegration.data,function(t){EventManagerIntegration.loadingOccasions=!1,restoreButton(n,e),location.reload()})})}})}),(EventManagerIntegration=EventManagerIntegration||{}).Admin=EventManagerIntegration.Admin||{},EventManagerIntegration.Admin.Oauth=function(a){function o(){a(function(){a(".oauth-access").addClass("hidden"),this.handleEvents()}.bind(this))}return o.prototype.requestOauth=function(t,n){a.ajax({url:eventintegration.ajaxurl,type:"post",dataType:"json",data:{action:"request_oauth",client:t,secret:n},success:function(t){t.success?(a(".error").addClass("hidden"),a(".updated").removeClass("hidden").empty().append("<p>"+t.data.message+"</p>"),a("#oauth-access").before("<p>"+t.data.url+"</p>"),a(".oauth-request").addClass("hidden"),a(".oauth-access").removeClass("hidden")):(a(".updated").addClass("hidden"),a(".error").removeClass("hidden").empty().append("<p>"+t.data+"</p>"))},error:function(t){console.log(t)}})},o.prototype.accessOauth=function(t){a.ajax({url:eventintegration.ajaxurl,type:"post",dataType:"json",data:{action:"access_oauth",verifier:t},success:function(t){t.success?(a(".error").addClass("hidden"),location.reload()):(a(".updated").addClass("hidden"),a(".error").removeClass("hidden").empty().append("<p>"+t.data+"</p>"))},error:function(t){console.log(t)}})},o.prototype.deleteOauth=function(){a.ajax({url:eventintegration.ajaxurl,type:"post",data:{action:"delete_oauth"},success:function(t){console.log(t),location.reload()},error:function(t){console.log(t)}})},o.prototype.handleEvents=function(){a("#oauth-request").submit(function(t){t.preventDefault();var n=a("#client-key").val(),e=a("#client-secret").val();o.prototype.requestOauth(n,e)}.bind(this)),a("#oauth-access").submit(function(t){t.preventDefault();var n=a("#verification-token").val();console.log(n),o.prototype.accessOauth(n)}.bind(this)),a("#oauth-authorized").submit(function(t){t.preventDefault(),o.prototype.deleteOauth()}.bind(this))},new o}(jQuery);