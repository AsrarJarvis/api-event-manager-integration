function collectCssFromButton(n){return{bgColor:n.css("background-color"),textColor:n.css("color"),borderColor:n.css("border-color"),textShadow:n.css("text-shadow"),boxShadow:n.css("box-shadow"),width:n.css("width"),text:n.text()}}function redLoadingButton(n,t){n.fadeOut(500,function(){var e=[eventIntegrationAdmin.loading+"&nbsp;&nbsp;&nbsp;",eventIntegrationAdmin.loading+".&nbsp;&nbsp;",eventIntegrationAdmin.loading+"..&nbsp;",eventIntegrationAdmin.loading+"..."];n.css("background-color","rgb(51, 197, 255)"),n.css("border-color","rgb(0, 164, 230)"),n.css("color","white"),n.css("text-shadow","0 -1px 1px rgb(0, 164, 230),1px 0 1px rgb(0, 164, 230),0 1px 1px rgb(0, 164, 230),-1px 0 1px rgb(0, 164, 230)"),n.css("box-shadow","none"),n.css("width","85px"),n.html(e[0]),n.fadeIn(500);var o=1;EventManagerIntegration.timerId=setInterval(function(){o>3&&(o=0),n.html(e[o]),++o},500),void 0!=t&&t()})}function restoreButton(n,t){n.fadeOut(500,function(){n.css("background-color",t.bgColor),n.css("color",t.textColor),n.css("border-color",t.borderColor),n.css("text-shadow",t.textShadow),n.css("box-shadow",t.boxShadow),n.css("width",t.width),n.text(t.text),n.fadeIn(500),clearTimeout(EventManagerIntegration.timerId)})}EventManagerIntegration=EventManagerIntegration||{},EventManagerIntegration.Admin=EventManagerIntegration.Admin||{},EventManagerIntegration.Admin.AcceptDeny=function(n){function t(){n(function(){this.handleEvents()}.bind(this))}return t.prototype.changeAccepted=function(t,e){n.ajax({url:eventintegration.ajaxurl,type:"post",data:{action:"accept_or_deny",value:t,postId:e},success:function(t){var o=n("#post-"+e);1==t?(o.find(".deny").removeClass("hidden"),o.find(".accept").addClass("hidden")):0==t&&(o.find(".deny").addClass("hidden"),o.find(".accept").removeClass("hidden"))}})},t.prototype.handleEvents=function(){n(document).on("click",".accept",function(e){e.preventDefault();var o=n(e.target).attr("postid");t.prototype.changeAccepted(1,o)}.bind(this)),n(document).on("click",".deny",function(e){e.preventDefault();var o=n(e.target).attr("postid");t.prototype.changeAccepted(0,o)}.bind(this))},new t}(jQuery);var EventManagerIntegration=EventManagerIntegration||{};EventManagerIntegration.loading=!1,EventManagerIntegration.data={action:"import_events",value:""},EventManagerIntegration.timerId=null,jQuery(document).ready(function(n){n("#importevents").click(function(){if(!EventManagerIntegration.loadingOccasions){EventManagerIntegration.loadingOccasions=!0;var t=n(this),e=collectCssFromButton(t);redLoadingButton(t,function(){EventManagerIntegration.data.value=t.attr("id"),jQuery.post(ajaxurl,EventManagerIntegration.data,function(n){var o=n;console.log(o),EventManagerIntegration.loadingOccasions=!1,restoreButton(t,e),location.reload()})})}})});